<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>iDynTree/ModelTransformers.h file | iDynTree master</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="./index.html">iDynTree</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">master</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="4">
            <li>
              <a href="pages.html">Versions</a>
              <ol>
                <li><a href="./index.html">Master</a></li>
              </ol>
            </li>
            <li>
              <a href="pages.html">Contacts</a>
              <ol>
                <li><a href="https://github.com/robotology/idyntree">GitHub</a></li>
                <li><a href="https://www.iit.it/web/ami/">Lab website</a></li>
              </ol>
            </li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="dir_6cbc0da72a45ae4a04ea9a67ef3f69a4.html">iDynTree</a>/</span>ModelTransformers.h <span class="m-thin">file</span>
        </h1>
        <p>Collection of function to modify model in various ways.</p>
        <nav class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#namespaces">Namespaces</a></li>
                <li><a href="#func-members">Functions</a></li>
              </ul>
            </li>
          </ul>
        </nav>
<p>In this file a series of functions for transforming Model objects are provided</p>
        <section id="namespaces">
          <h2><a href="#namespaces">Namespaces</a></h2>
          <dl class="m-doc">
            <dt>namespace <a href="namespaceiDynTree.html" class="m-doc">iDynTree</a></dt>
            <dd><span></span></dd>
          </dl>
        </section>
        <section id="func-members">
          <h2><a href="#func-members">Functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#aab77480c8f9d5add110768cf75226508" class="m-doc">removeFakeLinks</a>(</span><span class="m-doc-wrap">const Model&amp; modelWithFakeLinks,
              Model&amp; modelWithoutFakeLinks) -&gt; bool</span>
            </dt>
            <dd>\function Remove all fake links in the model, transforming them in frames.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a0dfcb86d2d13eb1969493ee84da2f5c0" class="m-doc">createReducedModel</a>(</span><span class="m-doc-wrap">const Model&amp; fullModel,
              const std::vector&lt;std::string&gt;&amp; jointsInReducedModel,
              Model&amp; reducedModel) -&gt; bool</span>
            </dt>
            <dd>This function takes in input a <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a> and an ordered list of joints and returns a model with just the joint specified in the list, with that exact order.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ae25f91a29dc9b01ae310d5e1526fa273" class="m-doc">createReducedModel</a>(</span><span class="m-doc-wrap">const Model&amp; fullModel,
              const std::vector&lt;std::string&gt;&amp; jointsInReducedModel,
              Model&amp; reducedModel,
              const std::unordered_map&lt;std::string, double&gt;&amp; removedJointPositions) -&gt; bool</span>
            </dt>
            <dd>This function takes in input a <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a> and an ordered list of joints and returns a model with just the joint specified in the list, with that exact order.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#aa6a9c44d5b80ede19b30f721f88d3679" class="m-doc">createModelWithNormalizedJointNumbering</a>(</span><span class="m-doc-wrap">const Model&amp; model,
              const std::string&amp; baseForNormalizedJointNumbering,
              Model&amp; reducedModel) -&gt; bool</span>
            </dt>
            <dd>Given a specified base, return a model with a &quot;normalized&quot; joint numbering for that base.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a3800ea0a0da713ba27da022845601b2f" class="m-doc">extractSubModel</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a>&amp; fullModel,
              const <a href="classiDynTree_1_1Traversal.html" class="m-doc">iDynTree::<wbr />Traversal</a>&amp; subModelTraversal,
              <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a>&amp; outputSubModel) -&gt; bool</span>
            </dt>
            <dd>Extract sub model from sub model traversal.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a43a3d5de5f629b00c5c7a607278a4f20" class="m-doc">addValidNamesToAllSolidShapes</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a>&amp; inputModel,
              <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a>&amp; outputModel) -&gt; bool</span>
            </dt>
            <dd>Add automatically generated names to all visual and collision solid shapes of the model.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a133a097cc3ef37982c00cdd729829118" class="m-doc">moveLinkFramesToBeCompatibleWithURDFWithGivenBaseLink</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a>&amp; inputModel,
              <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a>&amp; outputModel) -&gt; bool</span>
            </dt>
            <dd><a href="classiDynTree_1_1Transform.html" class="m-doc">Transform</a> the input model in model that can be exported as URDF with the given base link.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="aab77480c8f9d5add110768cf75226508"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool </span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#aab77480c8f9d5add110768cf75226508" class="m-doc-self">removeFakeLinks</a>(</span><span class="m-doc-wrap">const Model&amp; modelWithFakeLinks,
              Model&amp; modelWithoutFakeLinks)</span></span>
            </h3>
            <p>\function Remove all fake links in the model, transforming them in frames.</p>
<p>Given a <a href="classiDynTree_1_1Model.html" class="m-doc">Model</a> in input, this function copies all its links and joints to the model in output, except for links that recognized as &quot;fake links&quot;.</p><p>The condition for a link to be classified as &quot;fake link&quot; are:</p><ul><li>The link has a zero mass.</li><li>The link is a leaf, i.e. it is connected to only one neighbor.</li><li>The link is connected to its only neighbor with a fixed joint.</li></ul><p>Once a &quot;fake link&quot; has been identified to respect this two conditions, it and the joint that it connects it to its only neighbor is not copied to the output model, but a frame with the same name of the &quot;fake link&quot; and with the same transform is added to the model.</p><aside class="m-note m-danger"><h4>Warning</h4><p>This function does not handle <a href="classiDynTree_1_1SensorsList.html" class="m-doc">SensorsList</a> contained inside the input model.</p></aside><aside class="m-note m-info"><h4>Note</h4><p>The definition of &quot;fake link&quot; used in this function excludes the case in which two fake links are attached to one another.</p></aside>
          </div></section>
          <section class="m-doc-details" id="a0dfcb86d2d13eb1969493ee84da2f5c0"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool </span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a0dfcb86d2d13eb1969493ee84da2f5c0" class="m-doc-self">createReducedModel</a>(</span><span class="m-doc-wrap">const Model&amp; fullModel,
              const std::vector&lt;std::string&gt;&amp; jointsInReducedModel,
              Model&amp; reducedModel)</span></span>
            </h3>
            <p>This function takes in input a <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a> and an ordered list of joints and returns a model with just the joint specified in the list, with that exact order.</p>
<p>All other joints are be removed by lumping (i.e. fusing together) the inertia of the links that are connected by that joint, assuming the joint to be in &quot;rest&quot; position (i.e. zero for revolute or prismatic joints). The links eliminated with this process are be added back to the reduced model as &quot;frames&quot;, and are copied in the same way all the additional frames of the lumped links.</p>
          </div></section>
          <section class="m-doc-details" id="ae25f91a29dc9b01ae310d5e1526fa273"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool </span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ae25f91a29dc9b01ae310d5e1526fa273" class="m-doc-self">createReducedModel</a>(</span><span class="m-doc-wrap">const Model&amp; fullModel,
              const std::vector&lt;std::string&gt;&amp; jointsInReducedModel,
              Model&amp; reducedModel,
              const std::unordered_map&lt;std::string, double&gt;&amp; removedJointPositions)</span></span>
            </h3>
            <p>This function takes in input a <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a> and an ordered list of joints and returns a model with just the joint specified in the list, with that exact order.</p>
<p>All other joints are be removed by lumping (i.e. fusing together) the inertia of the links that are connected by that joint, assuming the joint to be in &quot;rest&quot; position (i.e. zero for revolute or prismatic joints), or the position specified in the removedJointPositions if a given joint is specified in removedJointPositions</p>
          </div></section>
          <section class="m-doc-details" id="aa6a9c44d5b80ede19b30f721f88d3679"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool </span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#aa6a9c44d5b80ede19b30f721f88d3679" class="m-doc-self">createModelWithNormalizedJointNumbering</a>(</span><span class="m-doc-wrap">const Model&amp; model,
              const std::string&amp; baseForNormalizedJointNumbering,
              Model&amp; reducedModel)</span></span>
            </h3>
            <p>Given a specified base, return a model with a &quot;normalized&quot; joint numbering for that base.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>true if all went well, false if there was an error in conversion.</td>
                </tr>
              </tfoot>
            </table>
<p>This function takes in input a <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a> and a name of a link in that model. It returns a model identical to the one in input, but with the joint serialization of the non-fixed joint modified in such a way that a non-fixed joint has an index higher than all the non-fixed joints on the path between it and the base. After all the non-fixed joints, the fixed joints are also added with the same criteria, but applied to fixed joints.</p><aside class="m-note m-info"><h4>Note</h4><p>This method make sure that the non-fixed joint in the model have a &quot;regular numbering&quot; as described in Featherstone &quot;Rigid Body Dynamics Algorithm&quot;, section 4.1.2 . Note that this numbering is not required by any algorithm in iDynTree, but it may be useful for example to ensure that for a chain model the joint numbering is the one induced by the kinematic structure.</p></aside><aside class="m-note m-danger"><h4>Warning</h4><p>This function does not handle <a href="classiDynTree_1_1SensorsList.html" class="m-doc">SensorsList</a> contained inside the input model.</p></aside>
          </div></section>
          <section class="m-doc-details" id="a3800ea0a0da713ba27da022845601b2f"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool </span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a3800ea0a0da713ba27da022845601b2f" class="m-doc-self">extractSubModel</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a>&amp; fullModel,
              const <a href="classiDynTree_1_1Traversal.html" class="m-doc">iDynTree::<wbr />Traversal</a>&amp; subModelTraversal,
              <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a>&amp; outputSubModel)</span></span>
            </h3>
            <p>Extract sub model from sub model traversal.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>true if all went well, false if there was an error in creating the sub model.</td>
                </tr>
              </tfoot>
            </table>
<p>This function creates a new <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a> containing links and joints composing the subModelTraversal. The function takes in input a <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a> and a <a href="classiDynTree_1_1Traversal.html" class="m-doc">iDynTree::<wbr />Traversal</a>. The new model will contain joints and links composing the subModelTraversal, with the same order. The FT sensor frames are added as additional frames.</p><aside class="m-note m-danger"><h4>Warning</h4><p>This function does not handle <a href="classiDynTree_1_1SensorsList.html" class="m-doc">SensorsList</a> contained inside the input model.</p></aside>
          </div></section>
          <section class="m-doc-details" id="a43a3d5de5f629b00c5c7a607278a4f20"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool </span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a43a3d5de5f629b00c5c7a607278a4f20" class="m-doc-self">addValidNamesToAllSolidShapes</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a>&amp; inputModel,
              <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a>&amp; outputModel)</span></span>
            </h3>
            <p>Add automatically generated names to all visual and collision solid shapes of the model.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>true if all went well, false if there was an error in creating the sub model.</td>
                </tr>
              </tfoot>
            </table>
<p>This function creates a new <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a> that is identical to the input one, but that sets a valid name for all the visual and collision solid shapes of the model.</p><p>For links that already have at least either collision or visual with valid name, <strong>all</strong> the corresponding shapes (collision or visual) will not be modified.</p><p>For links in which all shapes of a given type that do not have a valid name, a name will be generated as the following:</p><ul><li>If there is a single collision or visual element in the link, it will be named &lt;linkName&gt;_collision or &lt;linkName&gt;_visual</li><li>If there are multiple collision or visual elements in the link, the solid shapes will be &lt;linkName&gt;_collision_0, &lt;linkName&gt;_collision_1, ... &lt;linkName&gt;_collision_n or &lt;linkName&gt;_visual_0, &lt;linkName&gt;_visual_1, ... &lt;linkName&gt;_visual_n</li></ul>
          </div></section>
          <section class="m-doc-details" id="a133a097cc3ef37982c00cdd729829118"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool </span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a133a097cc3ef37982c00cdd729829118" class="m-doc-self">moveLinkFramesToBeCompatibleWithURDFWithGivenBaseLink</a>(</span><span class="m-doc-wrap">const <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a>&amp; inputModel,
              <a href="classiDynTree_1_1Model.html" class="m-doc">iDynTree::<wbr />Model</a>&amp; outputModel)</span></span>
            </h3>
            <p><a href="classiDynTree_1_1Transform.html" class="m-doc">Transform</a> the input model in model that can be exported as URDF with the given base link.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>true if all went well, false if there was an error in creating the sub model.</td>
                </tr>
              </tfoot>
            </table>
<p>In iDynTree, the link frame can be placed without constraint w.r.t. to the joints to which the link is connected. On the other hand, in the URDF format, the origin of the frame of the child link connected to its parent with a non-fixed joint <strong>must</strong> lay on the axis of the joint.</p><p>That means that if you want to export a model with an arbitrary base link, some link frame will need to be moved to respect the constraint given by the URDF format. This function perform exactly this transformation, ensuring that inertia, visual and collision information is probably accounted for, and leaving the original link frames in the model as &quot;additional frames&quot; with the naming scheme &lt;linkName&gt;_original_frame .</p><p>Note that the operation done depends on the base link used, if you want to use a different base link, change the default base link of the model via inputModel.setDefaultBaseLink method.</p>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>iDynTree documentation. Licensed under the <a href="https://spdx.org/licenses/BSD-3-Clause.html">BSD-3-Clause</a>. Project maintained by the <a href="https://www.iit.it/web/ami/">Artificial and Mechanical Intelligence Lab</a>. Contact the team via <a href="https://github.com/robotology/idyntree/issues/new">GitHub</a>.<br />Generated by <a href="https://doxygen.org/">Doxygen</a> 1.9.1 and <a href="https://mcss.mosra.cz/">m.css</a>.
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
